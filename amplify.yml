version: 1
frontend:
  phases:
    preBuild:
      commands:
        - npm ci --force
    build:
      commands:
        - npm run build
  artifacts:
    baseDirectory: build
    files:
      - "**/*"
  cache:
    paths:
      - node_modules/**/*
redirects:
  - source: https://sondratulalaphotography.com/<*>
    target: https://www.sondratulalaphotography.com/<*>
    status: 301
  - condition: $AMPLIFY_BRANCH === 'main'
    source: </*>
    target: /index.html
    status: 200
  - condition: $AMPLIFY_BRANCH === 'dev'
    source: </*>
    target: /index.html
    status: 200
  - source: https://sondratulalaphotography.com/<*>
    target: https://dev.sondratulalaphotography.com/<*>
    status: 200
